@page "/dashboard/role-selection"
@using StockhubWeb.Models
@using StockhubWeb.Services
@inject IAuthService AuthService
@inject NavigationManager Navigation

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="text-center mb-5">
                <h1>Добро пожаловать в StockhubWeb!</h1>
                <p class="lead text-muted">Выберите режим работы в системе</p>
            </div>

            <div class="row">
                <!-- Организатор -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-building fa-3x text-primary"></i>
                            </div>
                            <h4 class="card-title">Организатор</h4>
                            <p class="card-text text-muted">
                                Создайте свою организацию и управляйте складами, приглашайте сотрудников
                            </p>
                            <button class="btn btn-primary w-100" @onclick="EnterAsOrganizer">
                                Войти как организатор
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Сотрудник -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-users fa-3x text-success"></i>
                            </div>
                            <h4 class="card-title">Сотрудник</h4>
                            <p class="card-text text-muted">
                                Работайте с существующими организациями, управляйте инвентарем на складах
                            </p>
                            <button class="btn btn-success w-100" @onclick="EnterAsEmployee">
                                Войти как сотрудник
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        var user = await AuthService.GetCurrentUserAsync();
        if (user == null)
        {
            Navigation.NavigateTo("/login");
        }
    }

    private void EnterAsOrganizer()
    {
        Navigation.NavigateTo("/dashboard/organization/create");
    }

    private void EnterAsEmployee()
    {
        Navigation.NavigateTo("/dashboard/employee");
    }
}